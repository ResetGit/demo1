<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.demo.mapper.ZfbMapper">
    <resultMap id="zfb" type="com.example.demo.pojo.Zfb">
        <id column="orderId"  property="orderId" />
        <result column="buyerId"  property="buyerId" />
        <result column="orderAmount" property="orderAmount" />
        <result column="orderStatus"  property="orderStatus" />
        <result column="payStatus"  property="payStatus" />
        <result column="createTime"  property="createTime" />
        <result column="updateTime"  property="updateTime" />
        <result column="msg"  property="msg" />
        <result column="zh"  property="zh" />
        <result column="appId"  property="appId" />
        <result column="storeId"  property="storeId" />
        <result column="shopname"  property="shopname" />
        <result column="sn"  property="sn" />
        <result column="userKey"  property="userKey" />
        <result column="userName"  property="userName" />

    </resultMap>

    <select id="WeekData" resultType="java.util.Map" parameterType="java.util.Map" >
        select SUM(order_amount) as sum from order_master_ali o
        LEFT JOIN store s ON s.id=o.store_id
        LEFT JOIN user u ON u.id=s.user_id
        <where>
            <if test="id != null and id != ''">
                u.id=#{id,jdbcType=INTEGER}
            </if>
            <if test="pay_status != null and pay_status != ''">
                o.pay_status=#{pay_status,jdbcType=INTEGER}
            </if>
            <if test="create_time != null and create_time != ''">
                AND o.create_time LIKE CONCAT(CONCAT('%',#{create_time}),'%')
            </if>
        </where>
    </select>


</mapper>